!function(){let e={speech:function(e){this._validate(e),this._request(e)},_validate:function(e){if(!e)throw"The settings are undefined";if(!e.key)throw"The API key is undefined";if(!e.src)throw"The text is undefined";if(!e.hl)throw"The language is undefined";if(e.c&&"auto"!=e.c.toLowerCase()){var t=!1;switch(e.c.toLowerCase()){case"mp3":t=(new Audio).canPlayType("audio/mpeg");break;case"wav":t=(new Audio).canPlayType("audio/wav");break;case"aac":t=(new Audio).canPlayType("audio/aac");break;case"ogg":t=(new Audio).canPlayType("audio/ogg");break;case"caf":t=(new Audio).canPlayType("audio/x-caf")}if(!t)throw"The browser does not support the audio codec "+e.c}},_request:async function(e){try{let t=await fetch("https://api.voicerss.org/",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},body:this._buildRequest(e)});if(t.ok){let c=await t.text();if(e.audioElement instanceof HTMLAudioElement)e.audioElement.src=c,e.audioElement.play();else throw"audioElement must be an instance of HTMLAudioElement"}else throw await t.text()}catch(e){console.log(e)}},_buildRequest:function(e){var t=e.c&&"auto"!=e.c.toLowerCase()?e.c:this._detectCodec();return`key=${e.key||""}&src=${e.src||""}&hl=${e.hl||""}&r=${e.r||""}&c=${t||""}&f=${e.f||""}&ssml=${e.ssml||""}&b64=true`},_detectCodec:function(){var e=new Audio;return e.canPlayType("audio/mpeg")?"mp3":e.canPlayType("audio/wav")?"wav":e.canPlayType("audio/aac")?"aac":e.canPlayType("audio/ogg")?"ogg":e.canPlayType("audio/x-caf")?"caf":""},_getXHR:function(){try{return new XMLHttpRequest}catch(e){}try{return new ActiveXObject("Msxml3.XMLHTTP")}catch(e){}try{return new ActiveXObject("Msxml2.XMLHTTP.6.0")}catch(e){}try{return new ActiveXObject("Msxml2.XMLHTTP.3.0")}catch(e){}try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(e){}try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(e){}throw"The browser does not support HTTP request"}},t=document.getElementById("button"),c=document.getElementById("audio"),a=document.getElementById("settings-nsfw__input"),n=document.getElementById("nsfw-dark"),o=Array.from(document.getElementsByClassName("checkbox-container")),i=document.getElementById("all-checkbox"),s=[],r=!1,d="?blacklistFlags=nsfw,religious,political,racist,sexist,explicit";async function l(){s=[],o.forEach(e=>{e.childNodes[1].checked&&s&&s.push(e.childNodes[0].textContent?.trimEnd())}),(s=0===s.length||"All"===s[0]?["Any"]:s.filter(e=>"All"!==e)).join(",");let t=`https://v2.jokeapi.dev/joke/${s}${d}`;try{var a;let n=await fetch(t),o=await n.json();a=o.joke?o.joke:o.setup+"..."+o.delivery,e.speech({key:"f83cf3c984414c67b2a8240b169e56c2",src:a,hl:"en-us",r:"0",c:"mp3",f:"44khz_16bit_stereo",ssml:"false",audioElement:c})}catch(e){console.error("Error fetching jokes -",e)}}n&&(n.style.display="none"),t?.addEventListener("click",l),a?.addEventListener("change",()=>{(r=a.checked)?(d="",n&&(n.style.display="block")):(d="?blacklistFlags=nsfw,religious,political,racist,sexist,explicit",n&&(n.style.display="none",n.childNodes[1].checked=!1))}),o.forEach(e=>{e.addEventListener("change",()=>{"all-checkbox"!==e.childNodes[1].id&&i&&(i.checked=!1)})}),i&&i.addEventListener("change",()=>{i.checked?o.filter(e=>r?e:"nsfw-dark"!==e.id).forEach(e=>e.childNodes[1].checked=!0):o.forEach(e=>e.childNodes[1].checked=!1)})}();
//# sourceMappingURL=index.e4dd9564.js.map
