const e={speech:function(e){this._validate(e),this._request(e)},_validate:function(e){if(!e)throw"The settings are undefined";if(!e.key)throw"The API key is undefined";if(!e.src)throw"The text is undefined";if(!e.hl)throw"The language is undefined";if(e.c&&"auto"!=e.c.toLowerCase()){var t=!1;switch(e.c.toLowerCase()){case"mp3":t=(new Audio).canPlayType("audio/mpeg");break;case"wav":t=(new Audio).canPlayType("audio/wav");break;case"aac":t=(new Audio).canPlayType("audio/aac");break;case"ogg":t=(new Audio).canPlayType("audio/ogg");break;case"caf":t=(new Audio).canPlayType("audio/x-caf")}if(!t)throw"The browser does not support the audio codec "+e.c}},_request:async function(e){try{let t=await fetch("https://api.voicerss.org/",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},body:this._buildRequest(e)});if(t.ok){let c=await t.text();if(e.audioElement instanceof HTMLAudioElement)e.audioElement.src=c,e.audioElement.play();else throw"audioElement must be an instance of HTMLAudioElement"}else throw await t.text()}catch(e){console.log(e)}},_buildRequest:function(e){var t=e.c&&"auto"!=e.c.toLowerCase()?e.c:this._detectCodec();return`key=${e.key||""}&src=${e.src||""}&hl=${e.hl||""}&r=${e.r||""}&c=${t||""}&f=${e.f||""}&ssml=${e.ssml||""}&b64=true`},_detectCodec:function(){var e=new Audio;return e.canPlayType("audio/mpeg")?"mp3":e.canPlayType("audio/wav")?"wav":e.canPlayType("audio/aac")?"aac":e.canPlayType("audio/ogg")?"ogg":e.canPlayType("audio/x-caf")?"caf":""},_getXHR:function(){try{return new XMLHttpRequest}catch(e){}try{return new ActiveXObject("Msxml3.XMLHTTP")}catch(e){}try{return new ActiveXObject("Msxml2.XMLHTTP.6.0")}catch(e){}try{return new ActiveXObject("Msxml2.XMLHTTP.3.0")}catch(e){}try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(e){}try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(e){}throw"The browser does not support HTTP request"}},t=document.getElementById("button"),c=document.getElementById("audio"),a=document.getElementById("settings-nsfw__input"),o=document.getElementById("nsfw-dark"),n=Array.from(document.getElementsByClassName("checkbox-container"));let i=[],s=!1,l="?blacklistFlags=nsfw,religious,political,racist,sexist,explicit";async function d(){i=[],n.forEach(e=>{e.childNodes[1].checked&&i.push(e.childNodes[0].textContent.trimEnd())}),(i=0===i.length||"All"===i[0]?["Any"]:i.filter(e=>"All"!==e)).join(","),console.log(i);let t=`https://v2.jokeapi.dev/joke/${i}${l}`;console.log(t);try{var a;let o=await fetch(t),n=await o.json();a=n.joke?n.joke:n.setup+"..."+n.delivery,e.speech({key:"f83cf3c984414c67b2a8240b169e56c2",src:a,hl:"en-us",r:"0",c:"mp3",f:"44khz_16bit_stereo",ssml:"false",audioElement:c})}catch(e){console.error("Error fetching jokes -",e)}}document.getElementById("nsfw-dark").style.display="none",t.addEventListener("click",d),a.addEventListener("change",()=>{(s=a.checked)?(l="",o.style.display="block"):(l="?blacklistFlags=nsfw,religious,political,racist,sexist,explicit",o.style.display="none",o.childNodes[1].checked=!1)}),n.forEach(e=>{e.addEventListener("change",()=>{"all-checkbox"!==e.childNodes[1].id&&(document.getElementById("all-checkbox").checked=!1)})}),document.getElementById("all-checkbox").addEventListener("change",()=>{document.getElementById("all-checkbox").checked?n.filter(e=>s?e:"nsfw-dark"!==e.id).forEach(e=>e.childNodes[1].checked=!0):n.forEach(e=>e.childNodes[1].checked=!1)});
//# sourceMappingURL=index.8f092c44.js.map
